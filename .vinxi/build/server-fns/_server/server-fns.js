import{lazy as yn,createComponent as mn,sharedConfig as ht}from"solid-js";import{ssrElement as ne,escape as bn,mergeProps as wn,ssr as vn,renderToString as Sn}from"solid-js/web";import{provideRequestEvent as gt}from"solid-js/web/storage";import{H3Event as Se,setHeader as Rn,appendResponseHeader as En,getRequestIP as An,parseCookies as kn,getResponseStatus as xn,getResponseStatusText as _n,getCookie as $n,setCookie as zn,getResponseHeader as Cn,setResponseHeader as In,removeResponseHeader as Tn,getResponseHeaders as On,getRequestURL as Nn,getRequestWebStream as Pn,setResponseStatus as Ln,eventHandler as jn}from"h3";import{AsyncLocalStorage as Fn}from"node:async_hooks";function Un(e,t){const n=(e||"").split(";").filter(c=>typeof c=="string"&&!!c.trim()),r=n.shift()||"",s=Hn(r),i=s.name;let o=s.value;try{o=t?.decode===!1?o:(t?.decode||decodeURIComponent)(o)}catch{}const u={name:i,value:o};for(const c of n){const l=c.split("="),p=(l.shift()||"").trimStart().toLowerCase(),h=l.join("=");switch(p){case"expires":{u.expires=new Date(h);break}case"max-age":{u.maxAge=Number.parseInt(h,10);break}case"secure":{u.secure=!0;break}case"httponly":{u.httpOnly=!0;break}case"samesite":{u.sameSite=h;break}default:u[p]=h}}return u}function Hn(e){let t="",n="";const r=e.split("=");return r.length>1?(t=r.shift(),n=r.join("=")):n=e,{name:t,value:n}}var qn=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e[e.RegExp=32]="RegExp",e))(qn||{}),k=Symbol.asyncIterator,yt=Symbol.hasInstance,U=Symbol.isConcatSpreadable,x=Symbol.iterator,mt=Symbol.match,bt=Symbol.matchAll,wt=Symbol.replace,vt=Symbol.search,St=Symbol.species,Rt=Symbol.split,Et=Symbol.toPrimitive,H=Symbol.toStringTag,At=Symbol.unscopables,Dn={0:"Symbol.asyncIterator",1:"Symbol.hasInstance",2:"Symbol.isConcatSpreadable",3:"Symbol.iterator",4:"Symbol.match",5:"Symbol.matchAll",6:"Symbol.replace",7:"Symbol.search",8:"Symbol.species",9:"Symbol.split",10:"Symbol.toPrimitive",11:"Symbol.toStringTag",12:"Symbol.unscopables"},kt={[k]:0,[yt]:1,[U]:2,[x]:3,[mt]:4,[bt]:5,[wt]:6,[vt]:7,[St]:8,[Rt]:9,[Et]:10,[H]:11,[At]:12},Mn={0:k,1:yt,2:U,3:x,4:mt,5:bt,6:wt,7:vt,8:St,9:Rt,10:Et,11:H,12:At},Bn={2:"!0",3:"!1",1:"void 0",0:"null",4:"-0",5:"1/0",6:"-1/0",7:"0/0"},a=void 0,Wn={2:!0,3:!1,1:a,0:null,4:-0,5:Number.POSITIVE_INFINITY,6:Number.NEGATIVE_INFINITY,7:Number.NaN},xt={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"},Vn={0:Error,1:EvalError,2:RangeError,3:ReferenceError,4:SyntaxError,5:TypeError,6:URIError};function g(e,t,n,r,s,i,o,u,c,l,p){return{t:e,i:t,s:n,c:r,m:s,p:i,e:o,a:u,f:c,b:l,o:p}}function z(e){return g(2,a,e,a,a,a,a,a,a,a,a)}var _t=z(2),$t=z(3),Xn=z(1),Gn=z(0),Yn=z(4),Jn=z(5),Kn=z(6),Zn=z(7);function Qn(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return a}}function A(e){let t="",n=0,r;for(let s=0,i=e.length;s<i;s++)r=Qn(e[s]),r&&(t+=e.slice(n,s)+r,n=s+1);return n===0?t=e:t+=e.slice(n),t}function er(e){switch(e){case"\\\\":return"\\";case'\\"':return'"';case"\\n":return`
`;case"\\r":return"\r";case"\\b":return"\b";case"\\t":return"	";case"\\f":return"\f";case"\\x3C":return"<";case"\\u2028":return"\u2028";case"\\u2029":return"\u2029";default:return e}}function N(e){return e.replace(/(\\\\|\\"|\\n|\\r|\\b|\\t|\\f|\\u2028|\\u2029|\\x3C)/g,er)}var W="__SEROVAL_REFS__",ie="$R",re=`self.${ie}`;function tr(e){return e==null?`${re}=${re}||[]`:`(${re}=${re}||{})["${A(e)}"]=[]`}var zt=new Map,F=new Map;function Ct(e){return zt.has(e)}function nr(e){return F.has(e)}function rr(e){if(Ct(e))return zt.get(e);throw new Ir(e)}function sr(e){if(nr(e))return F.get(e);throw new Tr(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,W,{value:F,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,W,{value:F,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,W,{value:F,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,W,{value:F,configurable:!0,writable:!1,enumerable:!1});function Oe(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function ar(e){let t=xt[Oe(e)];return e.name!==t?{name:e.name}:e.constructor.name!==t?{name:e.constructor.name}:{}}function It(e,t){let n=ar(e),r=Object.getOwnPropertyNames(e);for(let s=0,i=r.length,o;s<i;s++)o=r[s],o!=="name"&&o!=="message"&&(o==="stack"?t&4&&(n=n||{},n[o]=e[o]):(n=n||{},n[o]=e[o]));return n}function Tt(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function ir(e){switch(e){case Number.POSITIVE_INFINITY:return Jn;case Number.NEGATIVE_INFINITY:return Kn}return e!==e?Zn:Object.is(e,-0)?Yn:g(0,a,e,a,a,a,a,a,a,a,a)}function Ot(e){return g(1,a,A(e),a,a,a,a,a,a,a,a)}function or(e){return g(3,a,""+e,a,a,a,a,a,a,a,a)}function ur(e){return g(4,e,a,a,a,a,a,a,a,a,a)}function cr(e,t){let n=t.valueOf();return g(5,e,n!==n?"":t.toISOString(),a,a,a,a,a,a,a,a)}function lr(e,t){return g(6,e,a,A(t.source),t.flags,a,a,a,a,a,a)}function fr(e,t){return g(17,e,kt[t],a,a,a,a,a,a,a,a)}function pr(e,t){return g(18,e,A(rr(t)),a,a,a,a,a,a,a,a)}function Nt(e,t,n){return g(25,e,n,A(t),a,a,a,a,a,a,a)}function dr(e,t,n){return g(9,e,a,a,a,a,a,n,a,a,Tt(t))}function hr(e,t){return g(21,e,a,a,a,a,a,a,t,a,a)}function gr(e,t,n){return g(15,e,a,t.constructor.name,a,a,a,a,n,t.byteOffset,a)}function yr(e,t,n){return g(16,e,a,t.constructor.name,a,a,a,a,n,t.byteOffset,a)}function mr(e,t,n){return g(20,e,a,a,a,a,a,a,n,t.byteOffset,a)}function br(e,t,n){return g(13,e,Oe(t),a,A(t.message),n,a,a,a,a,a)}function wr(e,t,n){return g(14,e,Oe(t),a,A(t.message),n,a,a,a,a,a)}function vr(e,t){return g(7,e,a,a,a,a,a,t,a,a,a)}function Sr(e,t){return g(28,a,a,a,a,a,a,[e,t],a,a,a)}function Rr(e,t){return g(30,a,a,a,a,a,a,[e,t],a,a,a)}function Er(e,t,n){return g(31,e,a,a,a,a,a,n,t,a,a)}function Ar(e,t){return g(32,e,a,a,a,a,a,a,t,a,a)}function kr(e,t){return g(33,e,a,a,a,a,a,a,t,a,a)}function xr(e,t){return g(34,e,a,a,a,a,a,a,t,a,a)}var _r={parsing:1,serialization:2,deserialization:3};function $r(e){return`Seroval Error (step: ${_r[e]})`}var zr=(e,t)=>$r(e),Pt=class extends Error{constructor(e,t){super(zr(e)),this.cause=t}},Be=class extends Pt{constructor(e){super("parsing",e)}},Cr=class extends Pt{constructor(e){super("deserialization",e)}};function _(e){return`Seroval Error (specific: ${e})`}var ce=class extends Error{constructor(e){super(_(1)),this.value=e}},P=class extends Error{constructor(e){super(_(2))}},Lt=class extends Error{constructor(e){super(_(3))}},Q=class extends Error{constructor(e){super(_(4))}},Ir=class extends Error{constructor(e){super(_(5)),this.value=e}},Tr=class extends Error{constructor(e){super(_(6))}},Or=class extends Error{constructor(e){super(_(7))}},C=class extends Error{constructor(t){super(_(8))}},jt=class extends Error{constructor(t){super(_(9))}},Nr=class{constructor(t,n){this.value=t,this.replacement=n}},le=()=>{let e={p:0,s:0,f:0};return e.p=new Promise((t,n)=>{e.s=t,e.f=n}),e},Pr=(e,t)=>{e.s(t),e.p.s=1,e.p.v=t},Lr=(e,t)=>{e.f(t),e.p.s=2,e.p.v=t},jr=le.toString(),Fr=Pr.toString(),Ur=Lr.toString(),Ft=()=>{let e=[],t=[],n=!0,r=!1,s=0,i=(c,l,p)=>{for(p=0;p<s;p++)t[p]&&t[p][l](c)},o=(c,l,p,h)=>{for(l=0,p=e.length;l<p;l++)h=e[l],!n&&l===p-1?c[r?"return":"throw"](h):c.next(h)},u=(c,l)=>(n&&(l=s++,t[l]=c),o(c),()=>{n&&(t[l]=t[s],t[s--]=void 0)});return{__SEROVAL_STREAM__:!0,on:c=>u(c),next:c=>{n&&(e.push(c),i(c,"next"))},throw:c=>{n&&(e.push(c),i(c,"throw"),n=!1,r=!1,t.length=0)},return:c=>{n&&(e.push(c),i(c,"return"),n=!1,r=!0,t.length=0)}}},Hr=Ft.toString(),Ut=e=>t=>()=>{let n=0,r={[e]:()=>r,next:()=>{if(n>t.d)return{done:!0,value:void 0};let s=n++,i=t.v[s];if(s===t.t)throw i;return{done:s===t.d,value:i}}};return r},qr=Ut.toString(),Ht=(e,t)=>n=>()=>{let r=0,s=-1,i=!1,o=[],u=[],c=(p=0,h=u.length)=>{for(;p<h;p++)u[p].s({done:!0,value:void 0})};n.on({next:p=>{let h=u.shift();h&&h.s({done:!1,value:p}),o.push(p)},throw:p=>{let h=u.shift();h&&h.f(p),c(),s=o.length,i=!0,o.push(p)},return:p=>{let h=u.shift();h&&h.s({done:!0,value:p}),c(),s=o.length,o.push(p)}});let l={[e]:()=>l,next:()=>{if(s===-1){let v=r++;if(v>=o.length){let f=t();return u.push(f),f.p}return{done:!1,value:o[v]}}if(r>s)return{done:!0,value:void 0};let p=r++,h=o[p];if(p!==s)return{done:!1,value:h};if(i)throw h;return{done:!0,value:h}}};return l},Dr=Ht.toString(),qt=e=>{let t=atob(e),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.charCodeAt(s);return r.buffer},Mr=qt.toString(),Br={},Wr={},Vr={0:{},1:{},2:{},3:{},4:{},5:{}},Xr={0:"[]",1:jr,2:Fr,3:Ur,4:Hr,5:Mr};function fe(e){return"__SEROVAL_STREAM__"in e}function ee(){return Ft()}function Gr(e){let t=ee(),n=e[k]();async function r(){try{let s=await n.next();s.done?t.return(s.value):(t.next(s.value),await r())}catch(s){t.throw(s)}}return r().catch(()=>{}),t}var Yr=Ht(k,le);function Jr(e){return Yr(e)}function Kr(e){let t=[],n=-1,r=-1,s=e[x]();for(;;)try{let i=s.next();if(t.push(i.value),i.done){r=t.length-1;break}}catch(i){n=t.length,t.push(i)}return{v:t,t:n,d:r}}var Zr=Ut(x);function Qr(e){return Zr(e)}function es(e,t){return{plugins:t.plugins,mode:e,marked:new Set,features:63^(t.disabledFeatures||0),refs:t.refs||new Map,depthLimit:t.depthLimit||1e3}}function ts(e,t){e.marked.add(t)}function Dt(e,t){let n=e.refs.size;return e.refs.set(t,n),n}function pe(e,t){let n=e.refs.get(t);return n!=null?(ts(e,n),{type:1,value:ur(n)}):{type:0,value:Dt(e,t)}}function Ne(e,t){let n=pe(e,t);return n.type===1?n:Ct(t)?{type:2,value:pr(n.value,t)}:n}function I(e,t){let n=Ne(e,t);if(n.type!==0)return n.value;if(t in kt)return fr(n.value,t);throw new ce(t)}function L(e,t){let n=pe(e,Vr[t]);return n.type===1?n.value:g(26,n.value,t,a,a,a,a,a,a,a,a)}function ns(e){let t=pe(e,Br);return t.type===1?t.value:g(27,t.value,a,a,a,a,a,a,I(e,x),a,a)}function rs(e){let t=pe(e,Wr);return t.type===1?t.value:g(29,t.value,a,a,a,a,a,[L(e,1),I(e,k)],a,a,a)}function ss(e,t,n,r){return g(n?11:10,e,a,a,a,r,a,a,a,a,Tt(t))}function as(e,t,n,r){return g(8,t,a,a,a,a,{k:n,v:r},a,L(e,0),a,a)}function is(e,t,n){return g(22,t,n,a,a,a,a,a,L(e,1),a,a)}function os(e,t,n){let r=new Uint8Array(n),s="";for(let i=0,o=r.length;i<o;i++)s+=String.fromCharCode(r[i]);return g(19,t,A(btoa(s)),a,a,a,a,a,L(e,5),a,a)}var us=(e=>(e[e.Vanilla=1]="Vanilla",e[e.Cross=2]="Cross",e))(us||{});function Mt(e,t){for(let n=0,r=t.length;n<r;n++){let s=t[n];e.has(s)||(e.add(s),s.extends&&Mt(e,s.extends))}}function Bt(e){if(e){let t=new Set;return Mt(t,e),[...t]}}function cs(e){switch(e){case"Int8Array":return Int8Array;case"Int16Array":return Int16Array;case"Int32Array":return Int32Array;case"Uint8Array":return Uint8Array;case"Uint16Array":return Uint16Array;case"Uint32Array":return Uint32Array;case"Uint8ClampedArray":return Uint8ClampedArray;case"Float32Array":return Float32Array;case"Float64Array":return Float64Array;case"BigInt64Array":return BigInt64Array;case"BigUint64Array":return BigUint64Array;default:throw new Or(e)}}var ls=1e6,fs=1e4,ps=2e4;function Wt(e,t){switch(t){case 3:return Object.freeze(e);case 1:return Object.preventExtensions(e);case 2:return Object.seal(e);default:return e}}var ds=1e3;function hs(e,t){var n;return{mode:e,plugins:t.plugins,refs:t.refs||new Map,features:(n=t.features)!=null?n:63^(t.disabledFeatures||0),depthLimit:t.depthLimit||ds}}function gs(e){return{mode:1,base:hs(1,e),child:a,state:{marked:new Set(e.markedRefs)}}}var ys=class{constructor(e,t){this._p=e,this.depth=t}deserialize(e){return m(this._p,this.depth,e)}};function Vt(e,t){if(t<0||!Number.isFinite(t)||!Number.isInteger(t))throw new C({t:4,i:t});if(e.refs.has(t))throw new Error("Conflicted ref id: "+t)}function ms(e,t,n){return Vt(e.base,t),e.state.marked.has(t)&&e.base.refs.set(t,n),n}function bs(e,t,n){return Vt(e.base,t),e.base.refs.set(t,n),n}function b(e,t,n){return e.mode===1?ms(e,t,n):bs(e,t,n)}function Re(e,t,n){if(Object.hasOwn(t,n))return t[n];throw new C(e)}function ws(e,t){return b(e,t.i,sr(N(t.s)))}function vs(e,t,n){let r=n.a,s=r.length,i=b(e,n.i,new Array(s));for(let o=0,u;o<s;o++)u=r[o],u&&(i[o]=m(e,t,u));return Wt(i,n.o),i}function Ss(e){switch(e){case"constructor":case"__proto__":case"prototype":case"__defineGetter__":case"__defineSetter__":case"__lookupGetter__":case"__lookupSetter__":return!1;default:return!0}}function Rs(e){switch(e){case k:case U:case H:case x:return!0;default:return!1}}function We(e,t,n){Ss(t)?e[t]=n:Object.defineProperty(e,t,{value:n,configurable:!0,enumerable:!0,writable:!0})}function Es(e,t,n,r,s){if(typeof r=="string")We(n,r,m(e,t,s));else{let i=m(e,t,r);switch(typeof i){case"string":We(n,i,m(e,t,s));break;case"symbol":Rs(i)&&(n[i]=m(e,t,s));break;default:throw new C(r)}}}function Xt(e,t,n,r){let s=n.k;if(s.length>0)for(let i=0,o=n.v,u=s.length;i<u;i++)Es(e,t,r,s[i],o[i]);return r}function As(e,t,n){let r=b(e,n.i,n.t===10?{}:Object.create(null));return Xt(e,t,n.p,r),Wt(r,n.o),r}function ks(e,t){return b(e,t.i,new Date(t.s))}function xs(e,t){if(e.base.features&32){let n=N(t.c);if(n.length>ps)throw new C(t);return b(e,t.i,new RegExp(n,t.m))}throw new P(t)}function _s(e,t,n){let r=b(e,n.i,new Set);for(let s=0,i=n.a,o=i.length;s<o;s++)r.add(m(e,t,i[s]));return r}function $s(e,t,n){let r=b(e,n.i,new Map);for(let s=0,i=n.e.k,o=n.e.v,u=i.length;s<u;s++)r.set(m(e,t,i[s]),m(e,t,o[s]));return r}function zs(e,t){if(t.s.length>ls)throw new C(t);return b(e,t.i,qt(N(t.s)))}function Cs(e,t,n){var r;let s=cs(n.c),i=m(e,t,n.f),o=(r=n.b)!=null?r:0;if(o<0||o>i.byteLength)throw new C(n);return b(e,n.i,new s(i,o))}function Is(e,t,n){var r;let s=m(e,t,n.f),i=(r=n.b)!=null?r:0;if(i<0||i>s.byteLength)throw new C(n);return b(e,n.i,new DataView(s,i))}function Gt(e,t,n,r){if(n.p){let s=Xt(e,t,n.p,{});Object.defineProperties(r,Object.getOwnPropertyDescriptors(s))}return r}function Ts(e,t,n){let r=b(e,n.i,new AggregateError([],N(n.m)));return Gt(e,t,n,r)}function Os(e,t,n){let r=Re(n,Vn,n.s),s=b(e,n.i,new r(N(n.m)));return Gt(e,t,n,s)}function Ns(e,t,n){let r=le(),s=b(e,n.i,r.p),i=m(e,t,n.f);return n.s?r.s(i):r.f(i),s}function Ps(e,t,n){return b(e,n.i,Object(m(e,t,n.f)))}function Ls(e,t,n){let r=e.base.plugins;if(r){let s=N(n.c);for(let i=0,o=r.length;i<o;i++){let u=r[i];if(u.tag===s)return b(e,n.i,u.deserialize(n.s,new ys(e,t),{id:n.i}))}}throw new Lt(n.c)}function js(e,t){return b(e,t.i,b(e,t.s,le()).p)}function Fs(e,t,n){let r=e.base.refs.get(n.i);if(r)return r.s(m(e,t,n.a[1])),a;throw new Q("Promise")}function Us(e,t,n){let r=e.base.refs.get(n.i);if(r)return r.f(m(e,t,n.a[1])),a;throw new Q("Promise")}function Hs(e,t,n){m(e,t,n.a[0]);let r=m(e,t,n.a[1]);return Qr(r)}function qs(e,t,n){m(e,t,n.a[0]);let r=m(e,t,n.a[1]);return Jr(r)}function Ds(e,t,n){let r=b(e,n.i,ee()),s=n.a,i=s.length;if(i)for(let o=0;o<i;o++)m(e,t,s[o]);return r}function Ms(e,t,n){let r=e.base.refs.get(n.i);if(r&&fe(r))return r.next(m(e,t,n.f)),a;throw new Q("Stream")}function Bs(e,t,n){let r=e.base.refs.get(n.i);if(r&&fe(r))return r.throw(m(e,t,n.f)),a;throw new Q("Stream")}function Ws(e,t,n){let r=e.base.refs.get(n.i);if(r&&fe(r))return r.return(m(e,t,n.f)),a;throw new Q("Stream")}function Vs(e,t,n){return m(e,t,n.f),a}function Xs(e,t,n){return m(e,t,n.a[1]),a}function m(e,t,n){if(t>e.base.depthLimit)throw new jt(e.base.depthLimit);switch(t+=1,n.t){case 2:return Re(n,Wn,n.s);case 0:return Number(n.s);case 1:return N(String(n.s));case 3:if(String(n.s).length>fs)throw new C(n);return BigInt(n.s);case 4:return e.base.refs.get(n.i);case 18:return ws(e,n);case 9:return vs(e,t,n);case 10:case 11:return As(e,t,n);case 5:return ks(e,n);case 6:return xs(e,n);case 7:return _s(e,t,n);case 8:return $s(e,t,n);case 19:return zs(e,n);case 16:case 15:return Cs(e,t,n);case 20:return Is(e,t,n);case 14:return Ts(e,t,n);case 13:return Os(e,t,n);case 12:return Ns(e,t,n);case 17:return Re(n,Mn,n.s);case 21:return Ps(e,t,n);case 25:return Ls(e,t,n);case 22:return js(e,n);case 23:return Fs(e,t,n);case 24:return Us(e,t,n);case 28:return Hs(e,t,n);case 30:return qs(e,t,n);case 31:return Ds(e,t,n);case 32:return Ms(e,t,n);case 33:return Bs(e,t,n);case 34:return Ws(e,t,n);case 27:return Vs(e,t,n);case 29:return Xs(e,t,n);default:throw new P(n)}}function Gs(e,t){try{return m(e,0,t)}catch(n){throw new Cr(n)}}var Ys=()=>T,Js=Ys.toString(),Yt=/=>/.test(Js);function Jt(e,t){return Yt?(e.length===1?e[0]:"("+e.join(",")+")")+"=>"+(t.startsWith("{")?"("+t+")":t):"function("+e.join(",")+"){return "+t+"}"}function Ks(e,t){return Yt?(e.length===1?e[0]:"("+e.join(",")+")")+"=>{"+t+"}":"function("+e.join(",")+"){"+t+"}"}var Kt="hjkmoquxzABCDEFGHIJKLNPQRTUVWXYZ$_",Ve=Kt.length,Zt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$_",Xe=Zt.length;function Zs(e){let t=e%Ve,n=Kt[t];for(e=(e-t)/Ve;e>0;)t=e%Xe,n+=Zt[t],e=(e-t)/Xe;return n}var Qs=/^[$A-Z_][0-9A-Z_$]*$/i;function Qt(e){let t=e[0];return(t==="$"||t==="_"||t>="A"&&t<="Z"||t>="a"&&t<="z")&&Qs.test(e)}function V(e){switch(e.t){case 0:return e.s+"="+e.v;case 2:return e.s+".set("+e.k+","+e.v+")";case 1:return e.s+".add("+e.v+")";case 3:return e.s+".delete("+e.k+")"}}function ea(e){let t=[],n=e[0];for(let r=1,s=e.length,i,o=n;r<s;r++)i=e[r],i.t===0&&i.v===o.v?n={t:0,s:i.s,k:a,v:V(n)}:i.t===2&&i.s===o.s?n={t:2,s:V(n),k:i.k,v:i.v}:i.t===1&&i.s===o.s?n={t:1,s:V(n),k:a,v:i.v}:i.t===3&&i.s===o.s?n={t:3,s:V(n),k:i.k,v:a}:(t.push(n),n=i),o=i;return t.push(n),t}function en(e){if(e.length){let t="",n=ea(e);for(let r=0,s=n.length;r<s;r++)t+=V(n[r])+",";return t}return a}var ta="Object.create(null)",na="new Set",ra="new Map",sa="Promise.resolve",aa="Promise.reject",ia={3:"Object.freeze",2:"Object.seal",1:"Object.preventExtensions",0:a};function oa(e,t){return{mode:e,plugins:t.plugins,features:t.features,marked:new Set(t.markedRefs),stack:[],flags:[],assignments:[]}}function ua(e){return{mode:2,base:oa(2,e),state:e,child:a}}var ca=class{constructor(e){this._p=e}serialize(e){return d(this._p,e)}};function la(e,t){let n=e.valid.get(t);n==null&&(n=e.valid.size,e.valid.set(t,n));let r=e.vars[n];return r==null&&(r=Zs(n),e.vars[n]=r),r}function fa(e){return ie+"["+e+"]"}function y(e,t){return e.mode===1?la(e.state,t):fa(t)}function E(e,t){e.marked.add(t)}function Ee(e,t){return e.marked.has(t)}function Pe(e,t,n){t!==0&&(E(e.base,n),e.base.flags.push({type:t,value:y(e,n)}))}function pa(e){let t="";for(let n=0,r=e.flags,s=r.length;n<s;n++){let i=r[n];t+=ia[i.type]+"("+i.value+"),"}return t}function da(e){let t=en(e.assignments),n=pa(e);return t?n?t+n:t:n}function tn(e,t,n){e.assignments.push({t:0,s:t,k:a,v:n})}function ha(e,t,n){e.base.assignments.push({t:1,s:y(e,t),k:a,v:n})}function B(e,t,n,r){e.base.assignments.push({t:2,s:y(e,t),k:n,v:r})}function Ge(e,t,n){e.base.assignments.push({t:3,s:y(e,t),k:n,v:a})}function Y(e,t,n,r){tn(e.base,y(e,t)+"["+n+"]",r)}function Ae(e,t,n,r){tn(e.base,y(e,t)+"."+n,r)}function $(e,t){return t.t===4&&e.stack.includes(t.i)}function M(e,t,n){return e.mode===1&&!Ee(e.base,t)?n:y(e,t)+"="+n}function ga(e){return W+'.get("'+e.s+'")'}function Ye(e,t,n,r){return n?$(e.base,n)?(E(e.base,t),Y(e,t,r,y(e,n.i)),""):d(e,n):""}function ya(e,t){let n=t.i,r=t.a,s=r.length;if(s>0){e.base.stack.push(n);let i=Ye(e,n,r[0],0),o=i==="";for(let u=1,c;u<s;u++)c=Ye(e,n,r[u],u),i+=","+c,o=c==="";return e.base.stack.pop(),Pe(e,t.o,t.i),"["+i+(o?",]":"]")}return"[]"}function Je(e,t,n,r){if(typeof n=="string"){let s=Number(n),i=s>=0&&s.toString()===n||Qt(n);if($(e.base,r)){let o=y(e,r.i);return E(e.base,t.i),i&&s!==s?Ae(e,t.i,n,o):Y(e,t.i,i?n:'"'+n+'"',o),""}return(i?n:'"'+n+'"')+":"+d(e,r)}return"["+d(e,n)+"]:"+d(e,r)}function nn(e,t,n){let r=n.k,s=r.length;if(s>0){let i=n.v;e.base.stack.push(t.i);let o=Je(e,t,r[0],i[0]);for(let u=1,c=o;u<s;u++)c=Je(e,t,r[u],i[u]),o+=(c&&o&&",")+c;return e.base.stack.pop(),"{"+o+"}"}return"{}"}function ma(e,t){return Pe(e,t.o,t.i),nn(e,t,t.p)}function ba(e,t,n,r){let s=nn(e,t,n);return s!=="{}"?"Object.assign("+r+","+s+")":r}function wa(e,t,n,r,s){let i=e.base,o=d(e,s),u=Number(r),c=u>=0&&u.toString()===r||Qt(r);if($(i,s))c&&u!==u?Ae(e,t.i,r,o):Y(e,t.i,c?r:'"'+r+'"',o);else{let l=i.assignments;i.assignments=n,c&&u!==u?Ae(e,t.i,r,o):Y(e,t.i,c?r:'"'+r+'"',o),i.assignments=l}}function va(e,t,n,r,s){if(typeof r=="string")wa(e,t,n,r,s);else{let i=e.base,o=i.stack;i.stack=[];let u=d(e,s);i.stack=o;let c=i.assignments;i.assignments=n,Y(e,t.i,d(e,r),u),i.assignments=c}}function Sa(e,t,n){let r=n.k,s=r.length;if(s>0){let i=[],o=n.v;e.base.stack.push(t.i);for(let u=0;u<s;u++)va(e,t,i,r[u],o[u]);return e.base.stack.pop(),en(i)}return a}function Le(e,t,n){if(t.p){let r=e.base;if(r.features&8)n=ba(e,t,t.p,n);else{E(r,t.i);let s=Sa(e,t,t.p);if(s)return"("+M(e,t.i,n)+","+s+y(e,t.i)+")"}}return n}function Ra(e,t){return Pe(e,t.o,t.i),Le(e,t,ta)}function Ea(e){return'new Date("'+e.s+'")'}function Aa(e,t){if(e.base.features&32)return"/"+t.c+"/"+t.m;throw new P(t)}function Ke(e,t,n){let r=e.base;return $(r,n)?(E(r,t),ha(e,t,y(e,n.i)),""):d(e,n)}function ka(e,t){let n=na,r=t.a,s=r.length,i=t.i;if(s>0){e.base.stack.push(i);let o=Ke(e,i,r[0]);for(let u=1,c=o;u<s;u++)c=Ke(e,i,r[u]),o+=(c&&o&&",")+c;e.base.stack.pop(),o&&(n+="(["+o+"])")}return n}function Ze(e,t,n,r,s){let i=e.base;if($(i,n)){let o=y(e,n.i);if(E(i,t),$(i,r)){let c=y(e,r.i);return B(e,t,o,c),""}if(r.t!==4&&r.i!=null&&Ee(i,r.i)){let c="("+d(e,r)+",["+s+","+s+"])";return B(e,t,o,y(e,r.i)),Ge(e,t,s),c}let u=i.stack;return i.stack=[],B(e,t,o,d(e,r)),i.stack=u,""}if($(i,r)){let o=y(e,r.i);if(E(i,t),n.t!==4&&n.i!=null&&Ee(i,n.i)){let c="("+d(e,n)+",["+s+","+s+"])";return B(e,t,y(e,n.i),o),Ge(e,t,s),c}let u=i.stack;return i.stack=[],B(e,t,d(e,n),o),i.stack=u,""}return"["+d(e,n)+","+d(e,r)+"]"}function xa(e,t){let n=ra,r=t.e.k,s=r.length,i=t.i,o=t.f,u=y(e,o.i),c=e.base;if(s>0){let l=t.e.v;c.stack.push(i);let p=Ze(e,i,r[0],l[0],u);for(let h=1,v=p;h<s;h++)v=Ze(e,i,r[h],l[h],u),p+=(v&&p&&",")+v;c.stack.pop(),p&&(n+="(["+p+"])")}return o.t===26&&(E(c,o.i),n="("+d(e,o)+","+n+")"),n}function _a(e,t){return j(e,t.f)+'("'+t.s+'")'}function $a(e,t){return"new "+t.c+"("+d(e,t.f)+","+t.b+")"}function za(e,t){return"new DataView("+d(e,t.f)+","+t.b+")"}function Ca(e,t){let n=t.i;e.base.stack.push(n);let r=Le(e,t,'new AggregateError([],"'+t.m+'")');return e.base.stack.pop(),r}function Ia(e,t){return Le(e,t,"new "+xt[t.s]+'("'+t.m+'")')}function Ta(e,t){let n,r=t.f,s=t.i,i=t.s?sa:aa,o=e.base;if($(o,r)){let u=y(e,r.i);n=i+(t.s?"().then("+Jt([],u)+")":"().catch("+Ks([],"throw "+u)+")")}else{o.stack.push(s);let u=d(e,r);o.stack.pop(),n=i+"("+u+")"}return n}function Oa(e,t){return"Object("+d(e,t.f)+")"}function j(e,t){let n=d(e,t);return t.t===4?n:"("+n+")"}function Na(e,t){if(e.mode===1)throw new P(t);return"("+M(e,t.s,j(e,t.f)+"()")+").p"}function Pa(e,t){if(e.mode===1)throw new P(t);return j(e,t.a[0])+"("+y(e,t.i)+","+d(e,t.a[1])+")"}function La(e,t){if(e.mode===1)throw new P(t);return j(e,t.a[0])+"("+y(e,t.i)+","+d(e,t.a[1])+")"}function ja(e,t){let n=e.base.plugins;if(n)for(let r=0,s=n.length;r<s;r++){let i=n[r];if(i.tag===t.c)return e.child==null&&(e.child=new ca(e)),i.serialize(t.s,e.child,{id:t.i})}throw new Lt(t.c)}function Fa(e,t){let n="",r=!1;return t.f.t!==4&&(E(e.base,t.f.i),n="("+d(e,t.f)+",",r=!0),n+=M(e,t.i,"("+qr+")("+y(e,t.f.i)+")"),r&&(n+=")"),n}function Ua(e,t){return j(e,t.a[0])+"("+d(e,t.a[1])+")"}function Ha(e,t){let n=t.a[0],r=t.a[1],s=e.base,i="";n.t!==4&&(E(s,n.i),i+="("+d(e,n)),r.t!==4&&(E(s,r.i),i+=(i?",":"(")+d(e,r)),i&&(i+=",");let o=M(e,t.i,"("+Dr+")("+y(e,r.i)+","+y(e,n.i)+")");return i?i+o+")":o}function qa(e,t){return j(e,t.a[0])+"("+d(e,t.a[1])+")"}function Da(e,t){let n=M(e,t.i,j(e,t.f)+"()"),r=t.a.length;if(r){let s=d(e,t.a[0]);for(let i=1;i<r;i++)s+=","+d(e,t.a[i]);return"("+n+","+s+","+y(e,t.i)+")"}return n}function Ma(e,t){return y(e,t.i)+".next("+d(e,t.f)+")"}function Ba(e,t){return y(e,t.i)+".throw("+d(e,t.f)+")"}function Wa(e,t){return y(e,t.i)+".return("+d(e,t.f)+")"}function Va(e,t){switch(t.t){case 17:return Dn[t.s];case 18:return ga(t);case 9:return ya(e,t);case 10:return ma(e,t);case 11:return Ra(e,t);case 5:return Ea(t);case 6:return Aa(e,t);case 7:return ka(e,t);case 8:return xa(e,t);case 19:return _a(e,t);case 16:case 15:return $a(e,t);case 20:return za(e,t);case 14:return Ca(e,t);case 13:return Ia(e,t);case 12:return Ta(e,t);case 21:return Oa(e,t);case 22:return Na(e,t);case 25:return ja(e,t);case 26:return Xr[t.s];default:throw new P(t)}}function d(e,t){switch(t.t){case 2:return Bn[t.s];case 0:return""+t.s;case 1:return'"'+t.s+'"';case 3:return t.s+"n";case 4:return y(e,t.i);case 23:return Pa(e,t);case 24:return La(e,t);case 27:return Fa(e,t);case 28:return Ua(e,t);case 29:return Ha(e,t);case 30:return qa(e,t);case 31:return Da(e,t);case 32:return Ma(e,t);case 33:return Ba(e,t);case 34:return Wa(e,t);default:return M(e,t.i,Va(e,t))}}function Xa(e,t){let n=d(e,t),r=t.i;if(r==null)return n;let s=da(e.base),i=y(e,r),o=e.state.scopeId,u=o==null?"":ie,c=s?"("+n+","+s+i+")":n;if(u==="")return t.t===10&&!s?"("+c+")":c;let l=o==null?"()":"("+ie+'["'+A(o)+'"])';return"("+Jt([u],c)+")"+l}var Ga=class{constructor(e,t){this._p=e,this.depth=t}parse(e){return S(this._p,this.depth,e)}},Ya=class{constructor(e,t){this._p=e,this.depth=t}parse(e){return S(this._p,this.depth,e)}parseWithError(e){return O(this._p,this.depth,e)}isAlive(){return this._p.state.alive}pushPendingState(){He(this._p)}popPendingState(){J(this._p)}onParse(e){q(this._p,e)}onError(e){Fe(this._p,e)}};function Ja(e){return{alive:!0,pending:0,initial:!0,buffer:[],onParse:e.onParse,onError:e.onError,onDone:e.onDone}}function Ka(e){return{type:2,base:es(2,e),state:Ja(e)}}function Za(e,t,n){let r=[];for(let s=0,i=n.length;s<i;s++)s in n?r[s]=S(e,t,n[s]):r[s]=0;return r}function Qa(e,t,n,r){return dr(n,r,Za(e,t,r))}function je(e,t,n){let r=Object.entries(n),s=[],i=[];for(let o=0,u=r.length;o<u;o++)s.push(A(r[o][0])),i.push(S(e,t,r[o][1]));return x in n&&(s.push(I(e.base,x)),i.push(Sr(ns(e.base),S(e,t,Kr(n))))),k in n&&(s.push(I(e.base,k)),i.push(Rr(rs(e.base),S(e,t,e.type===1?ee():Gr(n))))),H in n&&(s.push(I(e.base,H)),i.push(Ot(n[H]))),U in n&&(s.push(I(e.base,U)),i.push(n[U]?_t:$t)),{k:s,v:i}}function de(e,t,n,r,s){return ss(n,r,s,je(e,t,r))}function ei(e,t,n,r){return hr(n,S(e,t,r.valueOf()))}function ti(e,t,n,r){return gr(n,r,S(e,t,r.buffer))}function ni(e,t,n,r){return yr(n,r,S(e,t,r.buffer))}function ri(e,t,n,r){return mr(n,r,S(e,t,r.buffer))}function Qe(e,t,n,r){let s=It(r,e.base.features);return br(n,r,s?je(e,t,s):a)}function si(e,t,n,r){let s=It(r,e.base.features);return wr(n,r,s?je(e,t,s):a)}function ai(e,t,n,r){let s=[],i=[];for(let[o,u]of r.entries())s.push(S(e,t,o)),i.push(S(e,t,u));return as(e.base,n,s,i)}function ii(e,t,n,r){let s=[];for(let i of r.keys())s.push(S(e,t,i));return vr(n,s)}function oi(e,t,n,r){let s=Er(n,L(e.base,4),[]);return e.type===1||(He(e),r.on({next:i=>{if(e.state.alive){let o=O(e,t,i);o&&q(e,Ar(n,o))}},throw:i=>{if(e.state.alive){let o=O(e,t,i);o&&q(e,kr(n,o))}J(e)},return:i=>{if(e.state.alive){let o=O(e,t,i);o&&q(e,xr(n,o))}J(e)}})),s}function ui(e,t,n){if(this.state.alive){let r=O(this,t,n);r&&q(this,g(23,e,a,a,a,a,a,[L(this.base,2),r],a,a,a)),J(this)}}function ci(e,t,n){if(this.state.alive){let r=O(this,t,n);r&&q(this,g(24,e,a,a,a,a,a,[L(this.base,3),r],a,a,a))}J(this)}function li(e,t,n,r){let s=Dt(e.base,{});return e.type===2&&(He(e),r.then(ui.bind(e,s,t),ci.bind(e,s,t))),is(e.base,n,s)}function fi(e,t,n,r,s){for(let i=0,o=s.length;i<o;i++){let u=s[i];if(u.parse.sync&&u.test(r))return Nt(n,u.tag,u.parse.sync(r,new Ga(e,t),{id:n}))}return a}function pi(e,t,n,r,s){for(let i=0,o=s.length;i<o;i++){let u=s[i];if(u.parse.stream&&u.test(r))return Nt(n,u.tag,u.parse.stream(r,new Ya(e,t),{id:n}))}return a}function rn(e,t,n,r){let s=e.base.plugins;return s?e.type===1?fi(e,t,n,r,s):pi(e,t,n,r,s):a}function di(e,t,n,r,s){switch(s){case Object:return de(e,t,n,r,!1);case a:return de(e,t,n,r,!0);case Date:return cr(n,r);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return Qe(e,t,n,r);case Number:case Boolean:case String:case BigInt:return ei(e,t,n,r);case ArrayBuffer:return os(e.base,n,r);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return ti(e,t,n,r);case DataView:return ri(e,t,n,r);case Map:return ai(e,t,n,r);case Set:return ii(e,t,n,r)}if(s===Promise||r instanceof Promise)return li(e,t,n,r);let i=e.base.features;if(i&32&&s===RegExp)return lr(n,r);if(i&16)switch(s){case BigInt64Array:case BigUint64Array:return ni(e,t,n,r)}if(i&1&&typeof AggregateError<"u"&&(s===AggregateError||r instanceof AggregateError))return si(e,t,n,r);if(r instanceof Error)return Qe(e,t,n,r);if(x in r||k in r)return de(e,t,n,r,!!s);throw new ce(r)}function hi(e,t,n,r){if(Array.isArray(r))return Qa(e,t,n,r);if(fe(r))return oi(e,t,n,r);let s=r.constructor;return s===Nr?S(e,t,r.replacement):rn(e,t,n,r)||di(e,t,n,r,s)}function gi(e,t,n){let r=Ne(e.base,n);if(r.type!==0)return r.value;let s=rn(e,t,r.value,n);if(s)return s;throw new ce(n)}function S(e,t,n){if(t>=e.base.depthLimit)throw new jt(e.base.depthLimit);switch(typeof n){case"boolean":return n?_t:$t;case"undefined":return Xn;case"string":return Ot(n);case"number":return ir(n);case"bigint":return or(n);case"object":{if(n){let r=Ne(e.base,n);return r.type===0?hi(e,t+1,r.value,n):r.value}return Gn}case"symbol":return I(e.base,n);case"function":return gi(e,t,n);default:throw new ce(n)}}function q(e,t){e.state.initial?e.state.buffer.push(t):Ue(e,t,!1)}function Fe(e,t){if(e.state.onError)e.state.onError(t);else throw t instanceof Be?t:new Be(t)}function sn(e){e.state.onDone&&e.state.onDone()}function Ue(e,t,n){try{e.state.onParse(t,n)}catch(r){Fe(e,r)}}function He(e){e.state.pending++}function J(e){--e.state.pending<=0&&sn(e)}function O(e,t,n){try{return S(e,t,n)}catch(r){return Fe(e,r),a}}function yi(e,t){let n=O(e,0,t);n&&(Ue(e,n,!0),e.state.initial=!1,mi(e,e.state),e.state.pending<=0&&an(e))}function mi(e,t){for(let n=0,r=t.buffer.length;n<r;n++)Ue(e,t.buffer[n],!1)}function an(e){e.state.alive&&(sn(e),e.state.alive=!1)}function bi(e,t){let n=Bt(t.plugins),r=Ka({plugins:n,refs:t.refs,disabledFeatures:t.disabledFeatures,onParse(s,i){let o=ua({plugins:n,features:r.base.features,scopeId:t.scopeId,markedRefs:r.base.marked}),u;try{u=Xa(o,s)}catch(c){t.onError&&t.onError(c);return}t.onSerialize(u,i)},onError:t.onError,onDone:t.onDone});return yi(r,e),an.bind(null,r)}function et(e,t={}){var n;let r=Bt(t.plugins),s=t.disabledFeatures||0,i=(n=e.f)!=null?n:63,o=gs({plugins:r,markedRefs:e.m,features:i&~s,disabledFeatures:s});return Gs(o,e.t)}function he(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var wi={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(he(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(he(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(he(e))}}},serialize(e,t){return"new CustomEvent("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new CustomEvent(t.deserialize(e.type),t.deserialize(e.options))}},ke=wi,vi={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}},async async(e,t){return{name:await t.parse(e.name),message:await t.parse(e.message)}},stream(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}}},serialize(e,t){return"new DOMException("+t.serialize(e.message)+","+t.serialize(e.name)+")"},deserialize(e,t){return new DOMException(t.deserialize(e.message),t.deserialize(e.name))}},xe=vi;function ge(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var Si={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(ge(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(ge(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(ge(e))}}},serialize(e,t){return"new Event("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Event(t.deserialize(e.type),t.deserialize(e.options))}},_e=Si,Ri={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,t){return{name:await t.parse(e.name),options:await t.parse({type:e.type,lastModified:e.lastModified}),buffer:await t.parse(await e.arrayBuffer())}}},serialize(e,t){return"new File(["+t.serialize(e.buffer)+"],"+t.serialize(e.name)+","+t.serialize(e.options)+")"},deserialize(e,t){return new File([t.deserialize(e.buffer)],t.deserialize(e.name),t.deserialize(e.options))}},Ei=Ri;function ye(e){let t=[];return e.forEach((n,r)=>{t.push([r,n])}),t}var X={},on=(e,t=new FormData,n=0,r=e.length,s)=>{for(;n<r;n++)s=e[n],t.append(s[0],s[1]);return t},Ai={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===X},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(){return on.toString()},deserialize(){return X}},ki={tag:"seroval-plugins/web/FormData",extends:[Ei,Ai],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,t){return{factory:t.parse(X),entries:t.parse(ye(e))}},async async(e,t){return{factory:await t.parse(X),entries:await t.parse(ye(e))}},stream(e,t){return{factory:t.parse(X),entries:t.parse(ye(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.entries)+")"},deserialize(e,t){return on(t.deserialize(e.entries))}},$e=ki;function me(e){let t=[];return e.forEach((n,r)=>{t.push([r,n])}),t}var xi={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,t){return t.parse(me(e))},async async(e,t){return await t.parse(me(e))},stream(e,t){return t.parse(me(e))}},serialize(e,t){return"new Headers("+t.serialize(e)+")"},deserialize(e,t){return new Headers(t.deserialize(e))}},K=xi,G={},un=e=>new ReadableStream({start:t=>{e.on({next:n=>{try{t.enqueue(n)}catch{}},throw:n=>{t.error(n)},return:()=>{try{t.close()}catch{}}})}}),_i={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===G},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(){return un.toString()},deserialize(){return G}};function tt(e){let t=ee(),n=e.getReader();async function r(){try{let s=await n.read();s.done?t.return(s.value):(t.next(s.value),await r())}catch(s){t.throw(s)}}return r().catch(()=>{}),t}var $i={tag:"seroval/plugins/web/ReadableStream",extends:[_i],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,t){return{factory:t.parse(G),stream:t.parse(ee())}},async async(e,t){return{factory:await t.parse(G),stream:await t.parse(tt(e))}},stream(e,t){return{factory:t.parse(G),stream:t.parse(tt(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.stream)+")"},deserialize(e,t){let n=t.deserialize(e.stream);return un(n)}},Z=$i;function nt(e,t){return{body:t,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var zi={tag:"seroval-plugins/web/Request",extends:[Z,K],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,t){return{url:await t.parse(e.url),options:await t.parse(nt(e,e.body&&!e.bodyUsed?await e.clone().arrayBuffer():null))}},stream(e,t){return{url:t.parse(e.url),options:t.parse(nt(e,e.body&&!e.bodyUsed?e.clone().body:null))}}},serialize(e,t){return"new Request("+t.serialize(e.url)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Request(t.deserialize(e.url),t.deserialize(e.options))}},ze=zi;function rt(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var Ci={tag:"seroval-plugins/web/Response",extends:[Z,K],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,t){return{body:await t.parse(e.body&&!e.bodyUsed?await e.clone().arrayBuffer():null),options:await t.parse(rt(e))}},stream(e,t){return{body:t.parse(e.body&&!e.bodyUsed?e.clone().body:null),options:t.parse(rt(e))}}},serialize(e,t){return"new Response("+t.serialize(e.body)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Response(t.deserialize(e.body),t.deserialize(e.options))}},Ce=Ci,Ii={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,t){return t.parse(e.href)},async async(e,t){return await t.parse(e.href)},stream(e,t){return t.parse(e.href)}},serialize(e,t){return"new URL("+t.serialize(e)+")"},deserialize(e,t){return new URL(t.deserialize(e))}},Ie=Ii,Ti={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,t){return t.parse(e.toString())},async async(e,t){return await t.parse(e.toString())},stream(e,t){return t.parse(e.toString())}},serialize(e,t){return"new URLSearchParams("+t.serialize(e)+")"},deserialize(e,t){return new URLSearchParams(t.deserialize(e))}},Te=Ti;function Oi(e={}){let t,n=!1;const r=o=>{if(t&&t!==o)throw new Error("Context conflict")};let s;if(e.asyncContext){const o=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?s=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(s){const o=s.getStore();if(o!==void 0)return o}return t};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,u)=>{u||r(o),t=o,n=!0},unset:()=>{t=void 0,n=!1},call:(o,u)=>{r(o),t=o;try{return s?s.run(o,u):u()}finally{n||(t=void 0)}},async callAsync(o,u){t=o;const c=()=>{t=o},l=()=>t===o?c:void 0;it.add(l);try{const p=s?s.run(o,u):u();return n||(t=void 0),await p}finally{it.delete(l)}}}}function Ni(e={}){const t={};return{get(n,r={}){return t[n]||(t[n]=Oi({...e,...r})),t[n]}}}const oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},st="__unctx__",Pi=oe[st]||(oe[st]=Ni()),Li=(e,t={})=>Pi.get(e,t),at="__unctx_async_handlers__",it=oe[at]||(oe[at]=new Set);function ji(e){let t;const n=ln(e),r={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(n,{...r,body:e.node.req.body}):new Request(n,{...r,get body(){return t||(t=Xi(e),t)}})}function Fi(e){return e.web??={request:ji(e),url:ln(e)},e.web.request}function Ui(){return Ki()}const cn=Symbol("$HTTPEvent");function Hi(e){return typeof e=="object"&&(e instanceof Se||e?.[cn]instanceof Se||e?.__is_event__===!0)}function w(e){return function(...t){let n=t[0];if(Hi(n))t[0]=n instanceof Se||n.__is_event__?n:n[cn];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(n=Ui(),!n)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(n)}return e(...t)}}const ln=w(Nn),qi=w(An),ue=w(Ln),ot=w(xn),Di=w(_n),se=w(On),ut=w(Cn),Mi=w(In),fn=w(En),Bi=w(kn),Wi=w($n),Vi=w(zn),ae=w(Rn),Xi=w(Pn),Gi=w(Tn),Yi=w(Fi);function Ji(){return Li("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:Fn})}function Ki(){return Ji().use().event}const be="Invariant Violation",{setPrototypeOf:Zi=function(e,t){return e.__proto__=t,e}}=Object;class qe extends Error{framesToPop=1;name=be;constructor(t=be){super(typeof t=="number"?`${be}: ${t} (see https://github.com/apollographql/invariant-packages)`:t),Zi(this,qe.prototype)}}function Qi(e,t){if(!e)throw new qe(t)}const we="solidFetchEvent";function eo(e){return{request:Yi(e),response:so(e),clientAddress:qi(e),locals:{},nativeEvent:e}}function to(e){return{...e}}function no(e){if(!e.context[we]){const t=eo(e);e.context[we]=t}return e.context[we]}function ct(e,t){for(const[n,r]of t.entries())fn(e,n,r)}class ro{event;constructor(t){this.event=t}get(t){const n=ut(this.event,t);return Array.isArray(n)?n.join(", "):n||null}has(t){return this.get(t)!==null}set(t,n){return Mi(this.event,t,n)}delete(t){return Gi(this.event,t)}append(t,n){fn(this.event,t,n)}getSetCookie(){const t=ut(this.event,"Set-Cookie");return Array.isArray(t)?t:[t]}forEach(t){return Object.entries(se(this.event)).forEach(([n,r])=>t(Array.isArray(r)?r.join(", "):r,n,this))}entries(){return Object.entries(se(this.event)).map(([t,n])=>[t,Array.isArray(n)?n.join(", "):n])[Symbol.iterator]()}keys(){return Object.keys(se(this.event))[Symbol.iterator]()}values(){return Object.values(se(this.event)).map(t=>Array.isArray(t)?t.join(", "):t)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function so(e){return{get status(){return ot(e)},set status(t){ue(e,t)},get statusText(){return Di(e)},set statusText(t){ue(e,ot(e),t)},headers:new ro(e)}}const D={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function ao(e={}){const t={options:e,rootNode:pn(),staticRoutesMap:{}},n=r=>e.strictTrailingSlash?r:r.replace(/\/$/,"")||"/";if(e.routes)for(const r in e.routes)lt(t,n(r),e.routes[r]);return{ctx:t,lookup:r=>io(t,n(r)),insert:(r,s)=>lt(t,n(r),s),remove:r=>oo(t,n(r))}}function io(e,t){const n=e.staticRoutesMap[t];if(n)return n.data;const r=t.split("/"),s={};let i=!1,o=null,u=e.rootNode,c=null;for(let l=0;l<r.length;l++){const p=r[l];u.wildcardChildNode!==null&&(o=u.wildcardChildNode,c=r.slice(l).join("/"));const h=u.children.get(p);if(h===void 0){if(u&&u.placeholderChildren.length>1){const v=r.length-l;u=u.placeholderChildren.find(f=>f.maxDepth===v)||null}else u=u.placeholderChildren[0]||null;if(!u)break;u.paramName&&(s[u.paramName]=p),i=!0}else u=h}return(u===null||u.data===null)&&o!==null&&(u=o,s[u.paramName||"_"]=c,i=!0),u?i?{...u.data,params:i?s:void 0}:u.data:null}function lt(e,t,n){let r=!0;const s=t.split("/");let i=e.rootNode,o=0;const u=[i];for(const c of s){let l;if(l=i.children.get(c))i=l;else{const p=uo(c);l=pn({type:p,parent:i}),i.children.set(c,l),p===D.PLACEHOLDER?(l.paramName=c==="*"?`_${o++}`:c.slice(1),i.placeholderChildren.push(l),r=!1):p===D.WILDCARD&&(i.wildcardChildNode=l,l.paramName=c.slice(3)||"_",r=!1),u.push(l),i=l}}for(const[c,l]of u.entries())l.maxDepth=Math.max(u.length-c,l.maxDepth||0);return i.data=n,r===!0&&(e.staticRoutesMap[t]=i),i}function oo(e,t){let n=!1;const r=t.split("/");let s=e.rootNode;for(const i of r)if(s=s.children.get(i),!s)return n;if(s.data){const i=r.at(-1)||"";s.data=null,Object.keys(s.children).length===0&&s.parent&&(s.parent.children.delete(i),s.parent.wildcardChildNode=null,s.parent.placeholderChildren=[]),n=!0}return n}function pn(e={}){return{type:e.type||D.NORMAL,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function uo(e){return e.startsWith("**")?D.WILDCARD:e[0]===":"||e==="*"?D.PLACEHOLDER:D.NORMAL}const dn=[],co=lo(dn.filter(e=>e.page));function lo(e){function t(n,r,s,i){const o=Object.values(n).find(u=>s.startsWith(u.id+"/"));return o?(t(o.children||(o.children=[]),r,s.slice(o.id.length)),n):(n.push({...r,id:s,path:s.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/")}),n)}return e.sort((n,r)=>n.path.length-r.path.length).reduce((n,r)=>t(n,r,r.path,r.path),[])}function fo(e){return e.$HEAD||e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}ao({routes:dn.reduce((e,t)=>{if(!fo(t))return e;let n=t.path.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/").replace(/\*([^/]*)/g,(r,s)=>`**:${s}`).split("/").map(r=>r.startsWith(":")||r.startsWith("*")?r:encodeURIComponent(r)).join("/");if(/:[^/]*\?/g.test(n))throw new Error(`Optional parameters are not supported in API routes: ${n}`);if(e[n])throw new Error(`Duplicate API routes for "${n}" found at "${e[n].route.path}" and "${t.path}"`);return e[n]={route:t},e},{})});function po(e){e.forEach(t=>{if(!t.attrs.href)return;let n=document.head.querySelector(`link[href="${t.attrs.href}"]`);n||(n=document.createElement("link"),n.setAttribute("rel","preload"),n.setAttribute("as","style"),n.setAttribute("href",t.attrs.href),document.head.appendChild(n))})}var ho=" ";const go={style:e=>ne("style",e.attrs,()=>e.children,!0),link:e=>ne("link",e.attrs,void 0,!0),script:e=>e.attrs.src?ne("script",wn(()=>e.attrs,{get id(){return e.key}}),()=>vn(ho),!0):null,noscript:e=>ne("noscript",e.attrs,()=>bn(e.children),!0)};function yo(e,t){let{tag:n,attrs:{key:r,...s}={key:void 0},children:i}=e;return go[n]({attrs:{...s,nonce:t},key:r,children:i})}function mo(e,t,n,r="default"){return yn(async()=>{{const i=(await e.import())[r],u=(await t.inputs?.[e.src].assets()).filter(l=>l.tag==="style"||l.attrs.rel==="stylesheet");return typeof window<"u"&&po(u),{default:l=>[...u.map(p=>yo(p)),mn(i,l)]}}})}function bo(){function e(n){return{...n,...n.$$route?n.$$route.require().route:void 0,info:{...n.$$route?n.$$route.require().route.info:{},filesystem:!0},component:n.$component&&mo(n.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:n.children?n.children.map(e):void 0}}return co.map(e)}function wo(e){const t=Wi(e.nativeEvent,"flash");if(t)try{let n=JSON.parse(t);if(!n||!n.result)return;const r=[...n.input.slice(0,-1),new Map(n.input[n.input.length-1])],s=n.error?new Error(n.result):n.result;return{input:r,url:n.url,pending:!1,result:n.thrown?void 0:s,error:n.thrown?s:void 0}}catch(n){console.error(n)}finally{Vi(e.nativeEvent,"flash","",{maxAge:0})}}async function vo(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],router:{submission:wo(e)},routes:bo(),complete:!1,$islands:new Set})}const So=new Set([301,302,303,307,308]);function Ro(e){return e.status&&So.has(e.status)?e.status:302}const Eo={};function Ao(e){const t=new TextEncoder().encode(e),n=t.length,r=n.toString(16),s="00000000".substring(0,8-r.length)+r,i=new TextEncoder().encode(`;0x${s};`),o=new Uint8Array(12+n);return o.set(i),o.set(t,12),o}function ft(e,t){return new ReadableStream({start(n){bi(t,{scopeId:e,plugins:[ke,xe,_e,$e,K,Z,ze,Ce,Te,Ie],onSerialize(r,s){n.enqueue(Ao(s?`(${tr(e)},${r})`:r))},onDone(){n.close()},onError(r){n.error(r)}})}})}async function ko(e){const t=no(e),n=t.request,r=n.headers.get("X-Server-Id"),s=n.headers.get("X-Server-Instance"),i=n.headers.has("X-Single-Flight"),o=new URL(n.url);let u,c;if(r)Qi(typeof r=="string","Invalid server function"),[u,c]=r.split("#");else if(u=o.searchParams.get("id"),c=o.searchParams.get("name"),!u||!c)return new Response(null,{status:404});const l=Eo[u];let p;if(!l)return new Response(null,{status:404});p=await l.importer();const h=p[l.functionName];let v=[];if(!s||e.method==="GET"){const f=o.searchParams.get("args");if(f){const R=JSON.parse(f);(R.t?et(R,{plugins:[ke,xe,_e,$e,K,Z,ze,Ce,Te,Ie]}):R).forEach(te=>v.push(te))}}if(e.method==="POST"){const f=n.headers.get("content-type"),R=e.node.req,te=R instanceof ReadableStream,hn=R.body instanceof ReadableStream,De=te&&R.locked||hn&&R.body.locked,Me=te?R:R.body;if(f?.startsWith("multipart/form-data")||f?.startsWith("application/x-www-form-urlencoded"))v.push(await(De?n:new Request(n,{...n,body:Me})).formData());else if(f?.startsWith("application/json")){const gn=De?n:new Request(n,{...n,body:Me});v=et(await gn.json(),{plugins:[ke,xe,_e,$e,K,Z,ze,Ce,Te,Ie]})}}try{let f=await gt(t,async()=>(ht.context={event:t},t.locals.serverFunctionMeta={id:u+"#"+c},h(...v)));if(i&&s&&(f=await dt(t,f)),f instanceof Response){if(f.headers&&f.headers.has("X-Content-Raw"))return f;s&&(f.headers&&ct(e,f.headers),f.status&&(f.status<300||f.status>=400)&&ue(e,f.status),f.customBody?f=await f.customBody():f.body==null&&(f=null))}return s?(ae(e,"content-type","text/javascript"),ft(s,f)):pt(f,n,v)}catch(f){if(f instanceof Response)i&&s&&(f=await dt(t,f)),f.headers&&ct(e,f.headers),f.status&&(!s||f.status<300||f.status>=400)&&ue(e,f.status),f.customBody?f=f.customBody():f.body==null&&(f=null),ae(e,"X-Error","true");else if(s){const R=f instanceof Error?f.message:typeof f=="string"?f:"true";ae(e,"X-Error",R.replace(/[\r\n]+/g,""))}else f=pt(f,n,v,!0);return s?(ae(e,"content-type","text/javascript"),ft(s,f)):f}}function pt(e,t,n,r){const s=new URL(t.url),i=e instanceof Error;let o=302,u;return e instanceof Response?(u=new Headers(e.headers),e.headers.has("Location")&&(u.set("Location",new URL(e.headers.get("Location"),s.origin+"").toString()),o=Ro(e))):u=new Headers({Location:new URL(t.headers.get("referer")).toString()}),e&&u.append("Set-Cookie",`flash=${encodeURIComponent(JSON.stringify({url:s.pathname+s.search,result:i?e.message:e,thrown:r,error:i,input:[...n.slice(0,-1),[...n[n.length-1].entries()]]}))}; Secure; HttpOnly;`),new Response(null,{status:o,headers:u})}let ve;function xo(e){const t=new Headers(e.request.headers),n=Bi(e.nativeEvent),r=e.response.headers.getSetCookie();t.delete("cookie");let s=!1;return e.nativeEvent.node?.req&&(s=!0,e.nativeEvent.node.req.headers.cookie=""),r.forEach(i=>{if(!i)return;const{maxAge:o,expires:u,name:c,value:l}=Un(i);if(o!=null&&o<=0){delete n[c];return}if(u!=null&&u.getTime()<=Date.now()){delete n[c];return}n[c]=l}),Object.entries(n).forEach(([i,o])=>{t.append("cookie",`${i}=${o}`),s&&(e.nativeEvent.node.req.headers.cookie+=`${i}=${o};`)}),t}async function dt(e,t){let n,r=new URL(e.request.headers.get("referer")).toString();t instanceof Response&&(t.headers.has("X-Revalidate")&&(n=t.headers.get("X-Revalidate").split(",")),t.headers.has("Location")&&(r=new URL(t.headers.get("Location"),new URL(e.request.url).origin+"").toString()));const s=to(e);return s.request=new Request(r,{headers:xo(e)}),await gt(s,async()=>{await vo(s),ve||(ve=(await import("./assets/app-kJ4QPmu3.js")).default),s.router.dataOnly=n||!0,s.router.previousUrl=e.request.headers.get("referer");try{Sn(()=>{ht.context.event=s,ve()})}catch(u){console.log(u)}const i=s.router.data;if(!i)return t;let o=!1;for(const u in i)i[u]===void 0?delete i[u]:o=!0;return o&&(t instanceof Response?t.customBody&&(i._$value=t.customBody()):(i._$value=t,t=new Response(null,{status:200})),t.customBody=()=>i,t.headers.set("X-Single-Flight","true")),t})}const Po=jn(ko);export{Po as default};
